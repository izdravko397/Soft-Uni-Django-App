{% extends 'base.html' %}

{% block title %}Profile{% endblock %}

{% block content %}
<h2>Profile</h2>
<p>Username: {{ user.username }}</p>
<p>Role: {% if user.is_library_manager %}Library Manager{% else %}Customer{% endif %}</p>

{% if user.is_library_manager %}
    <h3>Book Management</h3>
    <ul>
        <li><a href="{% url 'book_list' %}">View Inventory</a></li>
        <li><a href="{% url 'book_create' %}">Add New Book</a></li>
    </ul>
{% endif %}

<h3>Booked Books</h3>
<ul>
    {% for book in user.profile.books.all %}
    <li>
        {{ book.title }} by {{ book.author }}
        <a href="{% url 'book_detail' book.pk %}" class="btn btn-secondary">Add Comment</a>
        {% if book.available %}
            <span>(read and returned)</span>
        {% else %}
            <form action="{% url 'book_return' book.pk %}" method="post" style="display:inline;">
                {% csrf_token %}
                <button type="submit" class="btn btn-warning">Return Book</button>
            </form>
        {% endif %}
    </li>
    {% empty %}
    <li>No books booked yet.</li>
    {% endfor %}
</ul>
{% endblock %}